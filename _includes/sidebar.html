{% if page.author_profile or layout.author_profile or page.sidebar %}
  <div class="sidebar sticky">
    <button class="sidebar-toggle" aria-label="Toggle Sidebar">
      <span class="toggle-line"></span>
      <span class="toggle-line"></span>
      <span class="toggle-line"></span>
    </button>

    <div class="sidebar-content">
      {% if page.author_profile or layout.author_profile %}{% include author-profile.html %}{% endif %}
      {% if page.sidebar %}
        {% for s in page.sidebar %}
          {% if s.image %}
            <img src="{{ s.image | relative_url }}"
                 alt="{% if s.image_alt %}{{ s.image_alt }}{% endif %}"
                 class="sidebar-image">
          {% endif %}
          {% if s.title %}<h3 class="sidebar-title">{{ s.title }}</h3>{% endif %}
          {% if s.text %}<div class="sidebar-text">{{ s.text | markdownify }}</div>{% endif %}
          {% if s.nav %}{% include nav_list nav=s.nav %}{% endif %}
        {% endfor %}
        {% if page.sidebar.nav %}
          {% include nav_list nav=page.sidebar.nav %}
        {% endif %}
      {% endif %}
    </div>
  </div>

  <script>
    document.querySelector('.sidebar-toggle').addEventListener('click', function() {
      document.querySelector('.sidebar').classList.toggle('is-visible');
      document.querySelector('.sidebar-content').classList.toggle('is-visible');
    });
  </script>
{% endif %}